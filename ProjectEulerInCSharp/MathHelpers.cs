using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Text;
using System.Threading.Tasks;

namespace ProjectEulerInCSharp
{
    public static class MathHelpers
    {

        public static List<int> FactorsOf(long n)
        {
            List<int> l = new List<int>();

            for (int i = 2; i <= n / 2; i++)
            {
                if (n.MultipleOf(i))
                {
                    l.Add(i);
                }
            }
            return l;
        }

        /// <summary>
        ///Each new term in the Fibonacci sequence is generated by adding the previous two terms. 
        ///By starting with 1 and 2, the first 10 terms will be:
        ///1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
        ///Return a list of all Fibonacci terms less that the given limit.
        /// </summary>
        /// <param name="limit"></param>
        /// <returns>An ordered collection containing part of the Fibonacci sequence.</returns>
        public static List<int> FibonacciNumbersLessThan(int limit)
        {
            if (limit < 0) { throw new ArgumentOutOfRangeException("limit", "too negative"); }

            List<int> l = new List<int>();
            l.Add(1);
            l.Add(2);

            for (int i = 2; true; i++)
            {
                int n = l[i - 1] + l[i - 2];
                if (n >= limit)
                {
                    break;
                }
                l.Add(n);
            }
            return l;
        }

        public static long LargestPrimeFactorOf(long n)
        {
            List<int> l = new List<int>();
            Dictionary<int, bool> primes = new Dictionary<int, bool>();

            for (long i = n / 2; i >= 2; i--)
            {
                if (n.MultipleOf(i))
                {
                    if (i.IsPrime())
                    {
                       return i;
                    }
                }
            }
            return -1;
        }

        public static List<int> PrimeFactorsOf(long n)
        {
            List<int> l = new List<int>();
            Dictionary<int, bool> primes = new Dictionary<int, bool>();

            for (int i = 2; i <= n / 2; i++)
            {
                if (n.MultipleOf(i))
                {
                    if (i.IsPrime())
                    {
                        l.Add(i);
                    }
                }
            }
            return l;
        }

    }
}
